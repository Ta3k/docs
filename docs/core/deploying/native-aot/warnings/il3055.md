---
title: "IL3055: P/invoke method declares a parameter with an abstract delegate"
description: "Correctness of interop for abstract delegates cannot be guaranteed after native compilation - the marshalling code for the delegate might not be available"
ms.date: 09/01/2022
ms.topic: reference
ms.author: michals
author: MichalStrehovsky
f1_keywords:
  - "IL3055"
---
# IL3055: P/invoke method declares a parameter with an abstract delegate

## Cause

P/invoke marshalling code needs to be generated ahead of time. If marshalling code for a delegate wasn't pregenerated, p/invoke marshalling will fail with an exception at runtime.

Marshalling code is generated for delegate types that are used in signatures of p/invoke methods, appear as fields of types passed to native code via p/invoke, or are decorated with <xref:System.Runtime.InteropServices.UnmanagedFunctionPointerAttribute>.

If a concrete type cannot be inferred from the p/invoke signature, marshalling code might not be available at runtime and the p/invoke will throw an exception.

Replace <xref:System.Delegate> or <xref:System.MulticastDelegate> in the p/invoke signature with a concrete delegate type.

## Example

```csharp
using System;
using System.Runtime.InteropServices;

PinvokeMethod(() => { });

// AOT analysis warning IL3055: Program.<Main>$(String[]): P/invoke method
// 'Program.<<Main>$>g__PinvokeMethod|0_1(Delegate)' declares a parameter with an abstract delegate.
// Correctness of interop for abstract delegates cannot be guaranteed after native compilation:
// the marshalling code for the delegate might not be available. Use a non-abstract delegate type
// or ensure any delegate instance passed as parameter is marked with `UnmanagedFunctionPointerAttribute`.
[DllImport("library")]
static extern void PinvokeMethod(Delegate del);
```
